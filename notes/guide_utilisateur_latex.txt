\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage[french]{babel}
\usepackage{titling} % Page de garde
\usepackage{hyperref} % url
\usepackage{subcaption} % Sous parties
\usepackage{titlesec} % Sous sous parties
\setcounter{secnumdepth}{4} % Sous sous parties
\usepackage{float}
\usepackage{placeins} % Placement des graphiques
\usepackage{enumitem} % Listes à puces
\sloppy % Lignes ne dépassent pas



\begin{document}



\begin{titlingpage}
\begin{center}

\includegraphics[scale=0.4]{logos/logo_hazviewer.png}
\vspace{11mm}

\includegraphics[scale=0.55]{logos/Africamuseum.png} \hspace{1cm} 
\includegraphics[scale=0.25]{logos/GeoRiskA.png}
\vspace{30mm}

{\Huge \textbf{HazViewer}}\\[1cm]
{\Huge \textbf{Guide utilisateur}}\\[1cm]

\end{center}
\end{titlingpage}



\tableofcontents
\newpage



\section{Introduction}


\subsection{Données}

HazViewer est actuellement basé sur deux bases de données, les données HazMiner et les données Citizen Observer.
\vspace{1\baselineskip}


\subsubsection{Données HazMiner}

La base de données HazMiner contient des informations sur certaines catastrophes naturelles (inondations, crues éclair et glissements de terrain), qui ont eu lieu dans le monde entier, collectées entre 2017 et 2023.

\noindent
Cette base de données a été construite à partir d’articles de journaux en ligne, traduits de 78 langues, et dont les informations sont extraites à l’aide de LLM (Large Language Model).
\vspace{1\baselineskip}

Lorsqu’un article a pour sujet une catastrophe naturelle, les paragraphes de cet article comprenant des informations que l’on cherche à récupérer (localisation, date et impact) sont sélectionnés, et font partie d’une première base de données (base de données paragraphes).

\noindent
Un même article peut fournir plusieurs paragraphes.

\noindent
Dans la base de données des paragraphes, on trouve de nombreuses informations dont celles de l’article (titre, date de publication, pays d’origine, source...), ainsi que d’autres extraites du texte, toujours par LLM : localisation de la catastrophe, date, nombre de morts, de blessés...
\vspace{1\baselineskip}

Dans un second temps, les paragraphes sont regroupés en évènements, selon leur localisation et leur date. Le but est de regrouper les différents articles parlant d’une même catastrophe, pour avoir un point de vue global sur celle-ci.

\noindent
Il s’agit de la deuxième base de données (base de données évènements).

\noindent
Un évènement a en général une localisation plus étendue et une durée plus longue, par exemple dans le cas d’une tempête qui a causé des inondations dans une grande zone.
\vspace{1\baselineskip}

\subsubsection{Données Citizen Observer}

Les données Citizen Observer correspondent aux catastrophes naturelles rapportées par le réseau des citizen observers en Afrique centrale. La source des données est un questionnaire à remplir, ce qui explique que les données soient en français.
\vspace{1\baselineskip}


\subsection{Interfaces de HazViewer}

HazViewer présente deux interfaces majeures : celle de la carte (interface principale, voir partie \ref{sec:Carte} Carte), qui affiche tous les évènements, et celle spécifique à chaque évènement HazMiner, appelée Zoom sur un évènement (voir \ref{sec:Zoom sur un évènement} Zoom sur un évènement).
\vspace{1\baselineskip}



\section{Carte} \label{sec:Carte}

La page principale est celle de la carte.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Page de la carte - vue générale}
    \centering
    \makebox[\textwidth]{\includegraphics[width=1.7\textwidth]{captures/1.png}}
    \label{fig:1}
\end{figure}
\FloatBarrier

La carte occupe la majorité de la page (partie gauche). Elle montre les évènements HazMiner et Citizen Observer, ainsi que plusieurs couches raster (voir partie \ref{sec:Affichage de la carte 1} Affichage de la carte).
\vspace{1\baselineskip}

En haut à gauche se trouvent les boutons permettant d'accéder aux principales fonctionnalités de HazViewer : filtrer les évènements, changer le style des évènements, télécharger les données des évènements, et prendre une capture d'écran de la carte (voir parties \ref{sec:Filtrer les évènements 1} Filtrer les évènements, \ref{sec:Changer le style des évènements 1} Changer le style des évènements, \ref{sec:Télécharger les données 1} Télécharger les données, \ref{sec:Télécharger une capture d'écran de la carte 1} Télécharger une capture d'écran de la carte).

\noindent
Cliquer sur un bouton permet d'ouvrir le formulaire correspondant (sauf pour la capture d'écran qui se fait directement, sans passer par un formulaire).
Les formulaires ne se superposent pas, si on ouvre un formulaire alors qu'un autre est déjà ouvert, celui-ci se ferme, tout en gardant en mémoire les modifications effectuées.
\vspace{1\baselineskip}

En haut à droite se trouve le bouton de localisation (voir partie \ref{sec:Afficher la localisation 1} Afficher la localisation).
\vspace{1\baselineskip}

En bas à droite se trouvent le gestionnaire des couches, les boutons de zoom et l'échelle (voir parties \ref{sec:Gestionnaire des couches 1} Gestionnaire des couches, \ref{sec:Échelle et zoom 1} Échelle et zoom).
\vspace{1\baselineskip}

La partie droite contient les informations sur les évènements (voir partie \ref{sec:Affichage des données pour un évènement 1} Affichage des données pour un évènement).
\vspace{1\baselineskip}

En bas à droite se trouvent les informations principales présentant HazViewer ainsi que des liens utiles : lien qui ouvre un onglet de la page contenant les informations sur HazViewer, lien vers le guide utilisateur, et liens vers le musée Royal de l'Afrique Centrale (\url{https://georiska.africamuseum.be/}) et vers la Vrije Universiteit Brussel (\url{https://cgis.research.vub.be/}).
\vspace{1\baselineskip}


\subsection{Affichage de la carte} \label{sec:Affichage de la carte 1}

\vspace{1\baselineskip}


\subsubsection{Couches} \label{sec:Couches 1}

Différentes couches peuvent être affichées sur la carte :
\vspace{1\baselineskip}

Couche de fond (il y a toujours forcément une et une seule couche de fond):
\begin{itemize}[label=\textbullet]
\item OpenStreetMap (OSM, visible par défaut)
\item OpenTopoMap (OSM, SRTM)
\item Couche satellite ESRI
\item Couche topographique ESRI
\item Couche relief ombré ESRI
\item Couche couleur gris clair ESRI
\item Couche couleur gris sombre ESRI
\item Routes ESRI
\end{itemize}
\vspace{1\baselineskip}

Couches rasters :
\begin{itemize}[label=\textbullet]
\item Susceptibilité des tremblements de terre (non visible par défaut)
\item Rivières (non visible par défaut)
\item Pays (seules les frontières sont visibles)
\end{itemize}
\vspace{1\baselineskip}

Couches liés aux filtres sur la localisation (voir partie \ref{sec:Filtrer les évènements 1} Filtrer les évènements) :
\begin{itemize}[label=\textbullet]
\item Emprise choisie
\item Polygone dessiné
\end{itemize}
\vspace{1\baselineskip}

Couches des évènements :
\begin{itemize}[label=\textbullet]
\item Évènements HazMiner
\item Évènements Citizen Observer
\item Évènement actuellement sélectionné
\end{itemize}
\vspace{1\baselineskip}

Sources des couches de fond :
\begin{itemize}[label=\textbullet]
\item OpenStreetMap
\begin{itemize}[label=\textbullet]
\item \url{https://www.openstreetmap.org}
\end{itemize}
\item OpenTopoMap
\begin{itemize}[label=\textbullet]
\item \url{https://opentopomap.org}
\end{itemize}
\item Couche satellite ESRI
\begin{itemize}[label=\textbullet]
\item World Imagery
\item \url{https://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9}
\end{itemize}
\item Couche topographique ESRI
\begin{itemize}[label=\textbullet]
\item  World Topographic Map
\item \url{https://www.arcgis.com/home/item.html?id=30e5fe3149c34df1ba922e6f5bbf808f}
\end{itemize}
\item Couche relief ombré ESRI
\begin{itemize}[label=\textbullet]
\item World Hillshade
\item \url{https://www.arcgis.com/home/item.html?id=1b243539f4514b6ba35e7d995890db1d}
\end{itemize}
\item Couche couleur gris clair ESRI
\begin{itemize}[label=\textbullet]
\item World Light Gray Base
\item \url{https://www.arcgis.com/home/item.html?id=ed712cb1db3e4bae9e85329040fb9a49}
\end{itemize}
\item Couche couleur gris sombre ESRI
\begin{itemize}[label=\textbullet]
\item World Dark Gray Base
\item \url{https://doc.arcgis.com/en/data-appliance/2022/maps/world-dark-gray-base.htm}
\end{itemize}
\item Routes ESRI
\begin{itemize}[label=\textbullet]
\item World Street Map
\item \url{https://www.arcgis.com/home/item.html?id=3b93337983e9436f8db950e38a8629af}
\end{itemize}
\end{itemize}
\vspace{1\baselineskip}

Sources des couches raster :
\begin{itemize}[label=\textbullet]
\item Couche susceptibilité des tremblements de terre :
\begin{itemize}[label=\textbullet]
\item Thèse de Thomas Stanley et Dalia B. Kirschbaum : A heuristic approach to global landslide susceptibility mapping
Global Landslide Susceptibility Model - Stanley and Kirschbaum
\item \url{https://www.researchgate.net/publication/313454800}
\end{itemize}
\item Couche des rivières :
\begin{itemize}[label=\textbullet]
\item Base de données HydroSHEDS (HydroRIVERS), filtré par débit : seules les rivières avec un débit supérieur à 10 m³/s apparaissent (cela correspond au champ ord\_flow inférieur ou égal à 5)
\item \url{https://www.hydrosheds.org/products/hydrorivers}
\end{itemize}
\item Couche des pays :
\begin{itemize}[label=\textbullet]
\item Base de données Natural Earth, carte Admin 0 – Countries
\item \url{https://www.naturalearthdata.com/downloads/110m-cultural-vectors/}
\end{itemize}
\end{itemize}
\vspace{1\baselineskip}

La couche susceptibilité des tremblements de terre est une couche de format raster, où la susceptibilité des tremblements de terre est représentée par un entier de 0 à 5, qui correspond à une probabilité de tremblement de terre (1: faible probabilité, ..., 5: forte probabilité).

\noindent
Quand la couche susceptibilité des tremblements de terre est visible, il est possible d'afficher sa légende en cliquant sur le bouton "Legend" qui apparaît en bas à gauche.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Carte avec les couches raster pays, rivières et susceptibilité des tremblements de terre, la légende est affichée en bas à gauche}
    \centering
    \makebox[\textwidth]{\includegraphics[width=1.7\textwidth]{captures/111.png}}
    \label{fig:111}
\end{figure}
\FloatBarrier


\subsubsection{Gestionnaire des couches} \label{sec:Gestionnaire des couches 1}

Le gestionnaire des couches permet d'afficher et de masquer des couches.
Il est possible d'afficher / masquer chaque couche indépendamment, ou par groupes de couches.

\vspace{1\baselineskip}
Le groupe de couches de fond, qui contient les couches OpenStreetMap, OpenTopoMap, et toutes les couches ESRI (satellite, topographique, relief ombré, couleur gris clair, couleur gris sombre) ne permet de sélectionner qu'une seule couche.

\noindent
Le groupe de couches raster contient la couche de susceptibilité des tremblements de terre, la couche de rivières et la couche des pays.

\noindent
Le groupe de couches liés aux filtres sur la localisation contient les couches de l'emprise choisie et celle du polygone.

\noindent
Le groupe de couches des évènements contient la couche des évènements HazMiner, la couche des évènements Citizen Observer, et la couche contenant l'évènement actuellement sélectionné.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Gestionnaire des couches}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/112.png}}
    \label{fig:112}
\end{figure}
\FloatBarrier


\subsubsection{Afficher la localisation} \label{sec:Afficher la localisation 1}

Le bouton en haut à droite permet d'afficher la localisation.

\noindent
Le navigateur récupère la latitude, la longitude et la précision de l'appareil, et les affiche à l'aide d'un point pour la position et d'un cercle représentant la précision.
La vue de la carte bouge de manière à placer la position au centre de la carte.

\noindent
Pour que la localisation s'affiche, il faut autoriser le navigateur à récupérer la position.
\vspace{1\baselineskip}

Si la localisation est déjà affichée, appuyer sur le bouton localisation permet de masquer la position.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Affichage de la localisation}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.8\textwidth]{captures/113.png}}
    \label{fig:113}
\end{figure}
\FloatBarrier


\subsubsection{Échelle et zoom} \label{sec:Échelle et zoom 1}

En bas à droite se trouvent une échelle, ainsi que des boutons permettant de régler le niveau de zoom sur la carte.
\vspace{1\baselineskip}


\subsection{Interaction avec les évènements} \label{sec:Interaction avec les évènements 1}

Les évènements apparaissent sous forme de cercles, sur lesquels il est possible de cliquer pour en sélectionner un, ce qui permet d'afficher ses propriétés.
\vspace{1\baselineskip}

Il est possible de changer la couleur et la taille des évènements (voir partie \ref{sec:Changer le style des évènements 1} Changer le style des évènements).

\noindent
La couleur de base des évènements dépend du type de catastrophe, et les évènements font au début tous la même taille (taille standard).

\noindent
L'évènement sélectionné garde la taille de l'évènement correspondant, mais change de couleur (vert clair) pour être plus visible.
\vspace{1\baselineskip}

D'une manière générale, quelque soit la taille des évènements, celle-ci s'adapte au niveau de zoom de la carte, pour éviter de voir des amas de gros points quand la carte est très dézoomée.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{La taille des évènements s'adapte au niveau de zoom}
    \centering
    \begin{subfigure}{0.7\linewidth}
        \includegraphics[width=\linewidth]{captures/12a.png}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.7\linewidth}
        \includegraphics[width=\linewidth]{captures/12b.png}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.7\linewidth}
        \includegraphics[width=\linewidth]{captures/12c.png}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:12}
\end{figure}
\FloatBarrier


\subsubsection{Affichage des données pour un évènement} \label{sec:Affichage des données pour un évènement 1}

Quand on clique sur un évènement, celui-ci est sélectionné (il apparaît en vert sur la carte), et ses propriétés s'affichent sur le côté droit de l'écran.
S'il y a trop de propriétés par rapport à l'espace disponible, il est possible de les faire défiler.

\noindent
Tant qu'aucun évènement n'est sélectionné, la phrase "Select an event to get more information!" apparaît.
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Évènements HazMiner :
\vspace{1\baselineskip}

Les propriétés sont classées en plusieurs catégories : propriétés principales, propriétés supplémentaires et propriétés de localisation.
\vspace{1\baselineskip}

Les propriétés principales sont affichées tout le temps.

Les autres types de propriétés ont chacun un bouton que l'on peut activer ou désactiver pour les afficher ou non.
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés principales : "Hazard type", "Event time", "Start time", "End time", "Median death", "Median injured", "Median affected", "Number of paragraphs", "Number of articles"
\item Liste des propriétés supplémentaires : "Country", "Number of languages", "Number of source countries", "Number of domains", "Duration (days)", "Hazard score"
\item Liste des propriétés de localisation : "Latitude", "Longitude", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude"
\end{itemize}
\vspace{1\baselineskip}

Le bouton More information permet d'ouvrir un nouvel onglet permettant d'accéder à la page dédiée à l'évènement (voir partie \ref{sec:Zoom sur un évènement} Zoom sur un évènement).
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Propriétés des évènements HazMiner}
    \centering
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/121a.png}
        \caption{Affichage par défaut}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/121c.png}
        \caption{Propriétés supplémentaires et de localisation affichées}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:121HazMiner}
\end{figure}
\FloatBarrier

\item Évènements Citizen Observer :
\vspace{1\baselineskip}

Ces évènements et les menus liés (menu du filtre et menu du changement de style) sont en français.
\vspace{1\baselineskip}

Les propriétés sont classées en plusieurs catégories : propriétés principales, propriétés spécifiques au type de catastrophe, propriétés sur l'impact et propriétés de localisation.
\vspace{1\baselineskip}

Les propriétés principales sont affichées tout le temps.

Les autres types de propriétés (impact, localisation, spécifiques) ont chacun un bouton que l'on peut activer ou désactiver pour les afficher ou non.
\vspace{1\baselineskip}

Les propriétés spécifiques au type de catastrophe existent pour les évènements de type inondation, glissement de terrain, tremblement de terre, vents violents et grêle.
Le bouton pour les propriétés spécifiques n’apparaît que si ces propriétés existent.
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés principales : "Type d'évènement", "Date", "Pays", "Province", "Territoire", "Nom de la collectivité/commune", "Nom du groupement/quartier", "Noms des villages affectés", "Nombre de morts", "Nombre de blessés", "Nombre de sans abris", "Réaction de la population"
\item Liste des propriétés de l'impact des évènements : "Impact bétail", "Impact logement", "Impact routes", "Impact ponts", "Impact autres", "Impact coupures électricité", "Impact sources d'eau de consommation", "Impact cultures"
\item Liste des propriétés de localisation des évènements : "Latitude", "Longitude", "Données géoréférencées"
\item Liste des propriétés spécifiques aux glissements de terrain : "Glissement de terrain", "Signes indiquant que la réactivation pouvait se produire", "Le récent glissement de terrain s'est produit pendant ou juste après", "Cause selon les habitants"
\item Liste des propriétés spécifiques aux inondations : "Durée (en jours)", "L'inondation est survenue pendant ou juste après"
\item Liste des propriétés spécifiques à la grêle : "Durée (en minutes)"
\item Liste des propriétés spécifiques aux vents violents : "Durée (en jours)", "Les vents violents sont survenus pendant ou juste après un évènement"
\item Liste des propriétés spécifiques aux tremblements de terre : "Durée", "Glissement de terrain déclenché par ce tremblement de terre"
\end{itemize}
\end{itemize}
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Propriétés des évènements Citizen Observer}
    \centering
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/121d.png}
        \caption{Affichage par défaut}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/121e.png}
        \caption{Propriétés spécifiques, sur l'impact et de localisation affichées}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:121co}
\end{figure}
\FloatBarrier


\subsubsection{Cas où plusieurs évènements sont superposés} \label{sec:Cas où plusieurs évènements sont superposés 1}

Il peut arriver que des évènements soient superposés car ils se sont produits au même endroit.
\vspace{1\baselineskip}

Dans ce cas, quand le pointeur de la souris passe sur une superposition d'évènements, une bulle qui affiche le nombre d'évènements apparaît.
\vspace{1\baselineskip}

Quand on clique sur une superposition d'évènements, une autre bulle, qui affiche les évènements présents (date et type de catastrophe) apparaît. Ces évènements présents sont sous la forme de liens cliquables, ce qui permet d'en sélectionner un pour afficher ses données (voir partie \ref{sec:Affichage des données pour un évènement 1} Affichage des données pour un évènement).
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Cas où plusieurs évènements sont superposés}
    \centering
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/122a.png}
        \caption{Affichage du nombre d'évènements}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/122b.png}
        \caption{Affichage des évènements présents}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:122}
\end{figure}
\FloatBarrier


\subsection{Filtrer les évènements} \label{sec:Filtrer les évènements 1}

Il est possible d'afficher seulement les évènements correspondant à un ou plusieurs critères, à l'aide de filtres.

\noindent
Pour cela, il est possible d'accéder au formulaire de filtre en cliquant sur le bouton "Filter".
\vspace{1\baselineskip}

Il existe deux systèmes de filtres indépendants : les filtres pour les évènements HazMiner, et les filtres pour les évènements Citizen Observer, ce qui se matérialise par deux menus différents.

\noindent
En haut du formulaire se trouve le bouton permettant de choisir le type d'évènement à filtrer, et qui ouvre le menu de filtres correspondant.

\noindent
Le bouton "Apply", en bas du formulaire, permet d'appliquer tous les filtres à la fois.
\vspace{1\baselineskip}

Les filtres par défaut permettent d'afficher tous les évènements.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Formulaire de filtre}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/13.png}
        \caption{Filtres HazMiner}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/13b.png}
        \caption{Filtres Citizen Observer}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:13}
\end{figure}
\FloatBarrier


\subsubsection{Filtres HazMiner} \label{sec:Filtres HazMiner 1}

Il y a 5 sous menus de filtres, qui contiennent chacun un ou plusieurs filtres :
\begin{itemize}[label=\textbullet]
\item Selon le type de catastrophe (inondation, crue éclair, tremblement de terre) : cases à cocher

\begin{figure}[h]
    \caption{Filtre HazMiner selon le type de catastrophe}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.4\textwidth]{captures/1311a.png}}
    \label{fig:1311}
\end{figure}
\FloatBarrier

\item Selon la date de l'évènement :
\begin{itemize}[label=\textbullet]
\item Choix d'un intervalle de temps : jour de début et de fin à sélectionner dans un calendrier
\item Selon la durée de l'évènement (en jours) : possibilité de choisir la valeur minimale et maximale
\end{itemize}

\begin{figure}[H]
    \caption{Filtre HazMiner selon la date de l'évènement}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1312a.png}
        \caption{Filtre HazMiner selon la date}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1312b.png}
        \caption{Sélection d'un jour dans un calendrier}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:1312}
\end{figure}
\FloatBarrier

\item Selon la localisation de l'évènement :
\begin{itemize}[label=\textbullet]
\item Selon le pays : utilisation d'une barre de recherche
\item Selon une zone d'intérêt : possibilité de dessiner un polygone et de garder uniquement les évènements à l'intérieur
\item Selon une emprise : possibilité de choisir d'une emprise et de garder uniquement les évènements à l'intérieur
\end{itemize}

\begin{figure}[h]
    \caption{Filtre HazMiner selon la localisation de l'évènement}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/1313a.png}}
    \label{fig:1313}
\end{figure}
\FloatBarrier

\item Selon l'impact (selon le nombre médian de morts, de blessés, de personnes affectées) : pour ces paramètres, possibilité de montrer ou non les valeurs nulles, et de choisir les valeurs minimales et maximales

\begin{figure}[h]
    \caption{Filtre HazMiner selon l'impact}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/1314.png}}
    \label{fig:1314}
\end{figure}
\FloatBarrier

\item Selon la popularité de l'évènement (selon le nombre d'articles, le nombre de paragraphes, le nombre de langues, le nombre de pays source, le nombre de noms de domaines) : pour ces paramètres, possibilité de choisir les valeurs minimales et maximales
\end{itemize}

\begin{figure}[h]
    \caption{Filtre HazMiner selon la popularité de l'évènement}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/1315.png}}
    \label{fig:1315}
\end{figure}
\FloatBarrier

Tous les filtres HazMiner se cumulent.
\vspace{1\baselineskip}

Les champs qui demandent une valeur numérique en entrée (filtre selon la durée, l'emprise, l'impact et la popularité) vérifient que la valeur entrée est valide : qu'il s'agit bien d'une valeur numérique, comprise entre les valeurs minimales et maximales possibles pour chaque champ.
\vspace{1\baselineskip}

La barre de recherche permet d'afficher uniquement les pays contenant la chaîne de caractères entrée dans une liste déroulante.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Utilisation de la barre de recherche pour choisir un pays}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1313b.png}
        \caption{Barre de recherche}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1313c.png}
        \caption{Résultat}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:1316}
\end{figure}
\FloatBarrier

Le filtre selon une zone d'intérêt offre la possibilité de dessiner un polygone (un seul à la fois), de l'afficher (affichage automatique quand il est tracé), et de ne garder que les évènements contenus dans ce polygone. 
Il est possible de réinitialiser ce polygone et le filtre associé.
Ce polygone correspond à une couche, et il est possible de l'afficher ou non à l'aide du gestionnaire de couches.
\vspace{1\baselineskip}

Le filtre selon une emprise permet de choisir une emprise en entrant ses valeurs (latitude minimale, maximale, longitude minimale, maximale), de l'afficher en cliquant sur le bouton "Show extent", et de ne garder que les évènements contenus dans cette emprise.
Il est possible de réinitialiser cette emprise et le filtre associé.
Le rectangle de l'emprise correspond à une couche, et il est possible de l'afficher ou non à l'aide du gestionnaire de couches.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Utilisation des 3 filtres de localisation combinés (pays, polygone et emprise)}
    \centering
    \begin{subfigure}{0.51\linewidth}
        \includegraphics[width=\linewidth]{captures/1313d.png}
        \caption{Filtres}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1313e.png}
        \caption{Avant filtres}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1313f.png}
        \caption{Résultat}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:1317}
\end{figure}
\FloatBarrier


\subsubsection{Filtres Citizen Observer} \label{sec:Filtres Citizen Observer 1}

Il y a 4 sous menus de filtres, qui contiennent chacun un ou plusieurs filtres :
\begin{itemize}[label=\textbullet]
\item Selon le type de catastrophe (inondation, glissement de terrain, tremblement de terre, vents violents, grêle, foudre) : cases à cocher

\begin{figure}[h]
    \caption{Filtre Citizen Observer selon le type de catastrophe}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/1321.png}}
    \label{fig:1321}
\end{figure}
\FloatBarrier

\item Selon la date de l'évènement :
\begin{itemize}[label=\textbullet]
\item Choix d'un intervalle de temps : jour de début et de fin à sélectionner dans un calendrier
\end{itemize}

\begin{figure}[H]
    \caption{Filtre Citizen Observer selon la date de l'évènement}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1322a.png}
        \caption{Filtre Citizen Observer selon la date}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1322b.png}
        \caption{Sélection d'un jour dans un calendrier}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:1322}
\end{figure}
\FloatBarrier

\item Selon la localisation de l'évènement :
\begin{itemize}[label=\textbullet]
\item Selon la province : sélection dans une liste déroulante
\item Selon le territoire : sélection dans une liste déroulante
\end{itemize}

\begin{figure}[H]
    \caption{Filtre Citizen Observer selon la localisation de l'évènement}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1323a.png}
        \caption{Filtre Citizen Observer selon la localisation}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/1323b.png}
        \caption{Sélection d'une province dans une liste déroulante}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:1323}
\end{figure}
\FloatBarrier

\item Selon l'impact :
\begin{itemize}[label=\textbullet]
\item Selon l'impact humain (selon le nombre de morts, de blessés, de sans-abris) : pour ces paramètres, possibilité de montrer ou non les valeurs nulles, et de choisir les valeurs minimales et maximales
\item Selon les autres impacts (bétail, logement, routes, ponts, autres bâtiments, coupures d'électricité, sources d'eau de consommation, cultures) : pour ces paramètres, si la case du paramètre est cochée, seuls les évènements qui ont eu ce type d'impact apparaissent
\end{itemize}
\end{itemize}

\begin{figure}[h]
    \caption{Filtre Citizen Observer selon l'impact}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/1324.png}}
    \label{fig:1324}
\end{figure}
\FloatBarrier

Tous les filtres Citizen Observer se cumulent.
\vspace{1\baselineskip}

Les champs qui demandent une valeur numérique en entrée (filtre selon l'impact humain) vérifient que la valeur entrée est valide : qu'il s'agit bien d'une valeur numérique, comprise entre les valeurs minimales et maximales possibles pour chaque champ.
\vspace{1\baselineskip}


\subsubsection{Réinitialisation des filtres} \label{sec:Réinitialisation des filtres 1}

Le bouton "Reset", en bas du formulaire de filtres, permet de réinitialiser tous les filtres à l'état de départ.
\vspace{1\baselineskip}


\subsection{Changer le style des évènements} \label{sec:Changer le style des évènements 1}

Il est possible de changer l'apparence des évènements sur la carte, en modifiant leur couleur et leur taille.

\noindent
Pour cela, il est possible d'accéder au formulaire de changement de style en cliquant sur le bouton "Change style".
\vspace{1\baselineskip}

Il existe deux systèmes de changements de style indépendants : celui pour les évènements HazMiner, et celui pour les évènements Citizen Observer, ce qui se matérialise par deux menus différents.

\noindent
En haut du formulaire se trouve le bouton permettant de choisir le type d'évènement dont on veut changer le style, et qui ouvre le menu de changement de style correspondant.

\noindent
Le bouton "Apply", en bas du formulaire, permet d'appliquer tous les changements de style à la fois.
\vspace{1\baselineskip}

Style par défaut : La couleur de base des évènements dépend du type de catastrophe, et les évènements font au début tous la même taille (taille standard).
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Formulaire de changement de style}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/14a.png}
        \caption{Changement de style HazMiner}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/14b.png}
        \caption{Changement de style Citizen Observer}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:14}
\end{figure}
\FloatBarrier


\subsubsection{Changement de style HazMiner} \label{sec:Changement de style HazMiner 1}

\begin{itemize}[label=\textbullet]
\item Changer la couleur des évènements :

Il est possible de changer la couleur des évènements selon plusieurs paramètres :
\begin{itemize}[label=\textbullet]
\item Selon le type de catastrophe (inondation, crue éclair, tremblement de terre)

\begin{figure}[h]
    \caption{Changement de style HazMiner selon le type de catastrophe}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.3\textwidth]{captures/141a.png}}
    \label{fig:1411}
\end{figure}
\FloatBarrier

\item Selon l'année

\begin{figure}[h]
    \caption{Changement de style HazMiner selon l'année}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.3\textwidth]{captures/141b.png}}
    \label{fig:1412}
\end{figure}
\FloatBarrier

\item Selon le mois

\begin{figure}[h]
    \caption{Changement de style HazMiner selon le mois}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.3\textwidth]{captures/141c.png}}
    \label{fig:1413}
\end{figure}
\FloatBarrier

\end{itemize}
Chaque cas a une couleur par défaut, qu'il est possible de changer.

\begin{figure}[h]
    \caption{Exemple de changement de couleur pour les évènements de type inondation}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.4\textwidth]{captures/141d.png}}
    \label{fig:1414}
\end{figure}
\FloatBarrier

\item Changer la taille des évènements :

Il est possible de changer la taille des évènements selon plusieurs paramètres :
\begin{itemize}[label=\textbullet]
\item Taille standard : tous les évènements ont la même taille

\begin{figure}[h]
    \caption{Changement de style HazMiner : taille standard}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.4\textwidth]{captures/141e.png}}
    \label{fig:1415}
\end{figure}
\FloatBarrier

\item Selon la durée de l'évènement

\begin{figure}[h]
    \caption{Changement de style HazMiner selon la durée de l'évènement}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.4\textwidth]{captures/141f.png}}
    \label{fig:1416}
\end{figure}
\FloatBarrier

\item Selon l'impact (selon le nombre médian de morts, de blessés, de personnes affectées)

\begin{figure}[h]
    \caption{Changement de style HazMiner selon l'impact (ici selon le nombre médian de morts)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.4\textwidth]{captures/141g.png}}
    \label{fig:1417}
\end{figure}
\FloatBarrier

\item Selon la popularité de l'évènement (selon le nombre d'articles, le nombre de paragraphes, le nombre de langues, le nombre de pays source, le nombre de noms de domaines)

\begin{figure}[h]
    \caption{Changement de style HazMiner selon la popularité de l'évènement (ici selon le nombre d'articles)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/141h.png}}
    \label{fig:1418}
\end{figure}
\FloatBarrier

\end{itemize}
Chaque paramètre possède une ou plusieurs jauge(s) permettant de régler la taille. Ces jauges ont chacune une valeur par défaut, qui peut être modifiée.
\end{itemize}

\begin{figure}[h]
    \caption{Exemple de changement de taille (taille standard)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/141i.png}}
    \label{fig:1419}
\end{figure}
\FloatBarrier

\begin{figure}[H]
    \caption{Exemples de cartes avec les changements de style (HazMiner)}
    \centering
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/141ex1.png}
        \caption{Couleur selon le type de catastrophe, taille selon le nombre médian de morts}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/141ex2.png}
        \caption{Couleur selon le mois, taille selon le nombre d'articles}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:14}
\end{figure}
\FloatBarrier


\subsubsection{Changement de style Citizen Observer} \label{sec:Changement de style Citizen Observer 1}

\begin{itemize}[label=\textbullet]
\item Changer la couleur des évènements :

Il est possible de changer la couleur des évènements selon plusieurs paramètres :
\begin{itemize}[label=\textbullet]
\item Selon le type de catastrophe (inondation, glissement de terrain, tremblement de terre, vents violents, grêle, foudre)

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon le type de catastrophe}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142a.png}}
    \label{fig:1421}
\end{figure}
\FloatBarrier

\item Selon l'année

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon l'année}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142b.png}}
    \label{fig:1422}
\end{figure}
\FloatBarrier

\item Selon le mois

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon le mois}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142c.png}}
    \label{fig:1423}
\end{figure}
\FloatBarrier

\item Selon si les données sont géoréférencées ou non

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon si les données sont géoréférencées ou non}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142d.png}}
    \label{fig:1424}
\end{figure}
\FloatBarrier

\end{itemize}
Chaque cas a une couleur par défaut, qu'il est possible de changer.

\begin{figure}[h]
    \caption{Exemple de changement de couleur pour les évènements de type inondation}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142e.png}}
    \label{fig:1425}
\end{figure}
\FloatBarrier

\item Changer la taille des évènements :

Il est possible de changer la taille des évènements selon plusieurs paramètres :
\begin{itemize}[label=\textbullet]
\item Taille standard : tous les évènements ont la même taille

\begin{figure}[h]
    \caption{Changement de style Citizen Observer : taille standard}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142f.png}}
    \label{fig:1426}
\end{figure}
\FloatBarrier

\item Selon l'impact humain (selon le nombre de morts, de blessés, de sans-abris)

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon l'impact humain (ici selon le nombre de morts)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142g.png}}
    \label{fig:1427}
\end{figure}
\FloatBarrier

\item Selon les autres impacts (bétail, logement, routes, ponts, autres bâtiments, coupures d'électricité, sources d'eau de consommation, cultures)

\begin{figure}[h]
    \caption{Changement de style Citizen Observer selon les autres impacts (ici selon l'impact sur le bétail)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.6\textwidth]{captures/142h.png}}
    \label{fig:1428}
\end{figure}
\FloatBarrier

\end{itemize}
Chaque paramètre possède une ou plusieurs jauge(s) permettant de régler la taille. Ces jauges ont chacune une valeur par défaut, qui peut être modifiée.
\end{itemize}

\begin{figure}[h]
    \caption{Exemple de changement de taille (taille standard)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/142i.png}}
    \label{fig:1429}
\end{figure}
\FloatBarrier

\begin{figure}[H]
    \caption{Exemples de cartes avec les changements de style (Citizen Observer)}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/142ex1.png}
        \caption{Couleur selon le type de catastrophe, taille selon le nombre de blessés)}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/142ex2.png}
        \caption{Couleur selon si les données sont géoréférencées ou non, taille selon l'impact sur le bétail}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:14}
\end{figure}
\FloatBarrier


\subsection{Télécharger les données} \label{sec:Télécharger les données 1}

Il est possible de télécharger les données HazMiner (évènements et paragraphes liés), c'est à dire toutes les propriétés des évènements et des paragraphes, en format csv.

\noindent
Pour cela, il est possible d'accéder au formulaire de téléchargement en cliquant sur le bouton "Download data".
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés des évènements : "Event id", "Hazard type", "Event time", "Start time", "End time", "Median death", "Median injured", "Median affected", "Number of paragraphs", "Number of articles", "Country", "Number of languages", "Number of source countries", "Number of domains", "Duration (days)", "Hazard score", "Latitude", "Longitude", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude"
\item Liste des propriétés des paragraphes : "Event id", "Paragraph id", "Title", "Hazard type", "Publication time", "Paragraph time", "Number of death", "Number of injured", "Number of affected", "Article language", "Article source country", "Domain url", "Latitude", "Longitude", "Standard deviation", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude", "Country", "Places names"
\end{itemize}
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Formulaire de téléchargement}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.7\textwidth]{captures/15a.png}}
    \label{fig:151}
\end{figure}
\FloatBarrier

Il est possible de télécharger tous les évènements, ou seulement ceux qui respectent les filtres actuels (voir partie \ref{sec:Filtrer les évènements 1} Filtrer les évènements).

\noindent
Il n'est possible de sélectionner qu'une option à la fois.
\vspace{1\baselineskip}

Il est possible de télécharger les évènements, les paragraphes correspondant à ces évènements (sans doublons) ou les deux en même temps. Les données des paragraphes devenant rapidement très massives, le téléchargement de ces données est limité : il doit y avoir moins de 10000 évènements concernés par les filtres pour pouvoir télécharger les données des paragraphes liés.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Messages d'erreur du téléchargement}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/15b.png}
        \caption{Aucun mode de téléchargement sélectionné}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/15c.png}
        \caption{Aucun évènement ne correspond aux critères du filtre}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/15d.png}
        \caption{Trop d'évènements concernés par les filtres pour pouvoir télécharger les données des paragraphes liés}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:152}
\end{figure}
\FloatBarrier

Une fois le téléchargement commencé, son avancement apparaît en bas de la fenêtre, au moyen de deux barres de progression.

\noindent
L'avancement de la récupération des données est indiqué par la première phrase : "Fetch data in progress..." ou "Fetch data completed!".

\noindent
L'avancement dans la création du texte à télécharger est affiché à l'aide de la deuxième phrase : "Prepare download :x\%" avec x le pourcentage d'avancement.

\begin{figure}[h]
    \caption{Barres de progression}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.45\textwidth]{captures/15f.png}}
    \label{fig:153}
\end{figure}
\FloatBarrier


\subsection{Télécharger une capture d'écran de la carte} \label{sec:Télécharger une capture d'écran de la carte 1}

À tout moment, il est possible de faire et télécharger une capture d'écran de la carte telle qu'elle est visible actuellement en cliquant sur le bouton "Screenshot".

\noindent
La carte est téléchargée en format png, et est la même que celle actuellement visible : même position et mêmes couches (voir partie \ref{sec:Affichage de la carte 1} Couches).

\noindent
Les fenêtres, les bulles et les boutons n'apparaissent pas.

\noindent
Une flèche vers le nord et une échelle sont ajoutées.

\begin{figure}[H]
    \caption{Exemple de capture d'écran}
    \centering
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/16a.png}
        \caption{Carte HazViewer}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/16b.png}
        \caption{Capture d'écran obtenue}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:16}
\end{figure}
\FloatBarrier



\section{Zoom sur un évènement} \label{sec:Zoom sur un évènement}

La page Zoom sur un évènement permet d'obtenir des informations supplémentaires sur un évènement HazMiner préalablement sélectionné sur la carte, en particulier sur les paragraphes liés à cet évènement.

\noindent
Cette option n'est donc disponible que pour les évènements HazMiner, et est accessible depuis le bouton More information quand un évènement HazMiner est sélectionné (voir partie \ref{sec:Affichage des données pour un évènement 1} Affichage des données pour un évènement).
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Page zoom sur un évènement - vue générale}
    \centering
    \makebox[\textwidth]{\includegraphics[width=1.7\textwidth]{captures/2.png}}
    \label{fig:2}
\end{figure}
\FloatBarrier

La carte occupe la majorité de la page (partie gauche). Elle montre l'évènement concerné et les paragraphes associés, ainsi que plusieurs couches raster (voir partie \ref{sec:Affichage de la carte 2} Affichage de la carte).
\vspace{1\baselineskip}

En haut à gauche se trouvent les boutons permettant d'accéder aux principales fonctionnalités de HazViewer : obtenir des séries temporelles sur l'évènement, télécharger les données de l'évènement, et prendre une capture d'écran de la carte (voir parties \ref{sec:Séries temporelles 2} Séries temporelles, \ref{sec:Télécharger les données 2} Télécharger les données, \ref{sec:Télécharger une capture d'écran de la carte 2} Télécharger une capture d'écran de la carte).

\noindent
Cliquer sur un bouton permet d'ouvrir le formulaire correspondant (sauf pour la capture d'écran qui se fait directement, sans passer par un formulaire).
Les formulaires ne se superposent pas, si on ouvre un formulaire alors qu'un autre est déjà ouvert, celui-ci se ferme.
\vspace{1\baselineskip}

En haut à droite se trouve le bouton de localisation (voir partie \ref{sec:Afficher la localisation 2} Afficher la localisation).
\vspace{1\baselineskip}

En bas à droite se trouvent le gestionnaire des couches, les boutons de zoom et l'échelle (voir parties \ref{sec:Gestionnaire des couches 2} Gestionnaire des couches, \ref{sec:Échelle et zoom 2} Échelle et zoom).
\vspace{1\baselineskip}

La partie droite contient les informations sur l'évènement et les paragraphes associés (voir parties \ref{sec:Affichage des données de l'évènement 2} Affichage des données de l'évènement, \ref{sec:Affichage des données pour un paragraphe 2} Affichage des données pour un paragraphe).
\vspace{1\baselineskip}

En bas à droite se trouvent les informations principales présentant HazViewer ainsi que des liens utiles : lien qui ouvre un onglet de la page contenant les informations sur HazViewer, lien vers le guide utilisateur, et liens vers le musée Royal de l'Afrique Centrale (\url{https://georiska.africamuseum.be/}) et vers la Vrije Universiteit Brussel (\url{https://cgis.research.vub.be/}).
\vspace{1\baselineskip}


\subsection{Affichage de la carte} \label{sec:Affichage de la carte 2}

\vspace{1\baselineskip}


\subsubsection{Couches} \label{sec:Couches 2}

Différentes couches peuvent être affichées sur la carte :
\vspace{1\baselineskip}

Couche de fond (il y a toujours forcément une et une seule couche de fond):
\begin{itemize}[label=\textbullet]
\item OpenStreetMap (OSM, visible par défaut)
\item OpenTopoMap (OSM, SRTM)
\item Couche satellite ESRI
\item Couche topographique ESRI
\item Couche relief ombré ESRI
\item Couche couleur gris clair ESRI
\item Couche couleur gris sombre ESRI
\item Routes ESRI
\end{itemize}
\vspace{1\baselineskip}

Couches rasters :
\begin{itemize}[label=\textbullet]
\item Susceptibilité des tremblements de terre (non visible par défaut)
\item Rivières (non visible par défaut)
\item Pays (seules les frontières sont visibles)
\end{itemize}
\vspace{1\baselineskip}

Couches des données HazMiner :
\begin{itemize}[label=\textbullet]
\item Évènement
\item Emprise de l'évènement (si elle existe)
\item Paragraphes
\item Paragraphe actuellement sélectionné
\item Emprise du paragraphe actuellement sélectionné (si elle existe)
\end{itemize}
\vspace{1\baselineskip}

Sources des couches de fond :
\begin{itemize}[label=\textbullet]
\item OpenStreetMap
\begin{itemize}[label=\textbullet]
\item \url{https://www.openstreetmap.org}
\end{itemize}
\item OpenTopoMap
\begin{itemize}[label=\textbullet]
\item \url{https://opentopomap.org}
\end{itemize}
\item Couche satellite ESRI
\begin{itemize}[label=\textbullet]
\item World Imagery
\item \url{https://www.arcgis.com/home/item.html?id=10df2279f9684e4a9f6a7f08febac2a9}
\end{itemize}
\item Couche topographique ESRI
\begin{itemize}[label=\textbullet]
\item  World Topographic Map
\item \url{https://www.arcgis.com/home/item.html?id=30e5fe3149c34df1ba922e6f5bbf808f}
\end{itemize}
\item Couche relief ombré ESRI
\begin{itemize}[label=\textbullet]
\item World Hillshade
\item \url{https://www.arcgis.com/home/item.html?id=1b243539f4514b6ba35e7d995890db1d}
\end{itemize}
\item Couche couleur gris clair ESRI
\begin{itemize}[label=\textbullet]
\item World Light Gray Base
\item \url{https://www.arcgis.com/home/item.html?id=ed712cb1db3e4bae9e85329040fb9a49}
\end{itemize}
\item Couche couleur gris sombre ESRI
\begin{itemize}[label=\textbullet]
\item World Dark Gray Base
\item \url{https://doc.arcgis.com/en/data-appliance/2022/maps/world-dark-gray-base.htm}
\end{itemize}
\item Routes ESRI
\begin{itemize}[label=\textbullet]
\item World Street Map
\item \url{https://www.arcgis.com/home/item.html?id=3b93337983e9436f8db950e38a8629af}
\end{itemize}
\end{itemize}
\vspace{1\baselineskip}

Sources des couches raster :
\begin{itemize}[label=\textbullet]
\item Couche susceptibilité des tremblements de terre :
\begin{itemize}[label=\textbullet]
\item Thèse de Thomas Stanley et Dalia B. Kirschbaum : A heuristic approach to global landslide susceptibility mapping
Global Landslide Susceptibility Model - Stanley and Kirschbaum
\item \url{https://www.researchgate.net/publication/313454800}
\end{itemize}
\item Couche des rivières :
\begin{itemize}[label=\textbullet]
\item Base de données HydroSHEDS (HydroRIVERS), filtré par débit : seules les rivières avec un débit supérieur à 10 m³/s apparaissent (cela correspond au champ ord\_flow inférieur ou égal à 5)
\item \url{https://www.hydrosheds.org/products/hydrorivers}
\end{itemize}
\item Couche des pays :
\begin{itemize}[label=\textbullet]
\item Base de données Natural Earth, carte Admin 0 – Countries
\item \url{https://www.naturalearthdata.com/downloads/110m-cultural-vectors/}
\end{itemize}
\end{itemize}
\vspace{1\baselineskip}

La couche susceptibilité des tremblements de terre est une couche de format raster, où la susceptibilité des tremblements de terre est représentée par un entier de 0 à 5, qui correspond à une probabilité de tremblement de terre (1: faible probabilité, ..., 5: forte probabilité).

\noindent
Quand la couche susceptibilité des tremblements de terre est visible, il est possible d'afficher sa légende en cliquant sur le bouton "Legend" qui apparaît en bas à gauche.

\begin{figure}[h]
    \caption{Carte avec les couches raster pays, rivières et susceptibilité des tremblements de terre, la légende est affichée en bas à gauche}
    \centering
    \makebox[\textwidth]{\includegraphics[width=1.7\textwidth]{captures/211.png}}
    \label{fig:211}
\end{figure}
\FloatBarrier

Dans le cas où le nombre de paragraphes est élevé (supérieur à 1000), le chargement des paragraphes peut prendre un peu de temps. Dans ce cas, une bulle "Loading..." est visible en haut de l'écran jusqu'à ce que les paragraphes aient chargé.

\begin{figure}[H]
    \caption{Chargement des paragraphes}
    \centering
    \begin{subfigure}{0.8\linewidth}
        \includegraphics[width=\linewidth]{captures/211b.png}
        \caption{Chargement en cours}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.8\linewidth}
        \includegraphics[width=\linewidth]{captures/211c.png}
        \caption{Chargement terminé}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:211b}
\end{figure}
\FloatBarrier


\subsubsection{Gestionnaire des couches} \label{sec:Gestionnaire des couches 2}

Le gestionnaire des couches permet d'afficher et de masquer des couches.
Il est possible d'afficher / masquer chaque couche indépendamment, ou par groupes de couches.

\vspace{1\baselineskip}
Le groupe de couches de fond, qui contient les couches OpenStreetMap, OpenTopoMap, et toutes les couches ESRI (satellite, topographique, relief ombré, couleur gris clair, couleur gris sombre) ne permet de sélectionner qu'une seule couche.

\noindent
Le groupe de couches raster contient la couche de susceptibilité des tremblements de terre, la couche de rivières et la couche des pays.

\noindent
Le groupe de couches des données HazMiner contient lui-même plusieurs groupes de couches : le groupe de couches de l'évènement (évènement et son emprise), la couche des paragraphes, le groupe de couches du paragraphe actuellement sélectionné (paragraphe et son emprise).
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Gestionnaire des couches}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/212.png}}
    \label{fig:112}
\end{figure}
\FloatBarrier


\subsubsection{Afficher la localisation} \label{sec:Afficher la localisation 2}

Le bouton en haut à droite permet d'afficher la localisation.

\noindent
Le navigateur récupère la latitude, la longitude et la précision de l'appareil, et les affiche à l'aide d'un point pour la position et d'un cercle représentant la précision.
La vue de la carte bouge de manière à placer la position au centre de la carte.

\noindent
Pour que la localisation s'affiche, il faut autoriser le navigateur à récupérer la position.
\vspace{1\baselineskip}

Si la localisation est déjà affichée, appuyer sur le bouton localisation permet de masquer la position.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Affichage de la localisation}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.8\textwidth]{captures/213.png}}
    \label{fig:213}
\end{figure}
\FloatBarrier


\subsubsection{Échelle et zoom} \label{sec:Échelle et zoom 2}

En bas à droite se trouvent une échelle, ainsi que des boutons permettant de régler le niveau de zoom sur la carte.
\vspace{1\baselineskip}


\subsection{Interaction avec l'évènement et les paragraphes} \label{sec:Interaction avec l'évènement et les paragraphes 2}

L'évènement apparaît sous la forme d'un cercle vert, et les paragraphes apparaissent sous forme de cercles noirs plus petits, sur lesquels il est possible de cliquer pour en sélectionner un, ce qui permet d'afficher ses propriétés.
\vspace{1\baselineskip}

Si elle existe, l'emprise de l'évènement est représentée par un rectangle jaune.

\noindent
Si elle existe, l'emprise du paragraphe sélectionné est représentée par un rectangle noir.
De plus, si celle-ci possède un écart-type, celui-ci s'affiche sous la forme de segments.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Affichage de l'évènement et des paragraphes}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.8\textwidth]{captures/22.png}}
    \label{fig:22}
\end{figure}
\FloatBarrier


\subsubsection{Affichage des données de l'évènement} \label{sec:Affichage des données de l'évènement 2}

Les propriétés de l'évènement s'affichent en permanence du coté droit de l'écran (partie haute).
S'il y a trop de propriétés par rapport à l'espace disponible, il est possible de les faire défiler.
\vspace{1\baselineskip}

Les propriétés sont classées en plusieurs catégories : propriétés principales, propriétés supplémentaires et propriétés de localisation.
\vspace{1\baselineskip}

Les propriétés principales sont affichées tout le temps.

\noindent
Les autres types de propriétés ont chacun un bouton que l'on peut activer ou désactiver pour les afficher ou non.
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés principales : "Hazard type", "Event time", "Start time", "End time", "Median death", "Median injured", "Median affected", "Number of paragraphs", "Number of articles"
\item Liste des propriétés supplémentaires : "Country", "Number of languages", "Number of source countries", "Number of domains", "Duration (days)", "Hazard score"
\item Liste des propriétés de localisation : "Latitude", "Longitude", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude"
\end{itemize}
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Propriétés des évènements}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/221a.png}
        \caption{Affichage par défaut}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/221b.png}
        \caption{Propriétés supplémentaires et de localisation affichées}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:221}
\end{figure}
\FloatBarrier


\subsubsection{Affichage des données pour un paragraphe} \label{sec:Affichage des données pour un paragraphe 2}

Quand on clique sur un paragraphe, celui-ci est sélectionné (il apparaît en rouge sur la carte), et ses propriétés s'affichent sur le côté droit (partie basse) de l'écran.
S'il y a trop de propriétés par rapport à l'espace disponible, il est possible de les faire défiler.

\noindent
Tant qu'aucun paragraphe n'est sélectionné, la phrase "Select a paragraph to get more information!" apparaît.
\vspace{1\baselineskip}

Les propriétés sont classées en plusieurs catégories : propriétés principales et propriétés de localisation.
\vspace{1\baselineskip}

Les propriétés principales sont affichées tout le temps.

\noindent
Les propriétés de localisation ont un bouton que l'on peut activer ou désactiver pour les afficher ou non.
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés principales : "Title", "Hazard type", "Publication time", "Paragraph time", "Number of death", "Number of injured", "Number of affected", "Article language", "Article source country", "Domain url"
\item Liste des propriétés de localisation : "Latitude", "Longitude", "Standard deviation", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude", "Country", "Places names"
\end{itemize}
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Propriétés des paragraphes}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/222a.png}
        \caption{Affichage par défaut}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/222b.png}
        \caption{Propriétés de localisation affichées}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:222}
\end{figure}
\FloatBarrier


\subsubsection{Cas où plusieurs paragraphes sont superposés} \label{sec:Cas où plusieurs paragraphes sont superposés 2}

Il peut arriver que des paragraphes soient superposés car ils se sont produits au même endroit.
\vspace{1\baselineskip}

Dans ce cas, quand le pointeur de la souris passe sur une superposition de paragraphes, une bulle qui affiche le nombre de paragraphes apparaît.
\vspace{1\baselineskip}

Quand on clique sur une superposition de paragraphes, une autre bulle, qui affiche les paragraphes présents (date de publication et titre de l'article) apparaît. Ces paragraphes présents sont sous la forme de liens cliquables, ce qui permet d'en sélectionner un pour afficher ses données (voir partie \ref{sec:Affichage des données pour un paragraphe 2} Affichage des données pour un paragraphe).
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Cas où plusieurs paragraphes sont superposés}
    \centering
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/223a.png}
        \caption{Affichage du nombre de paragraphes}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.4\linewidth}
        \includegraphics[width=\linewidth]{captures/223b.png}
        \caption{Affichage des paragraphes présents}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:223}
\end{figure}
\FloatBarrier


\subsection{Séries temporelles} \label{sec:Séries temporelles 2}

Le formulaire des séries temporelles est accessible à partir du bouton "Time series".
\vspace{1\baselineskip}

Il permet d'afficher différentes séries temporelles créées à l'aide de deux données des paragraphes : la date de publication de l'article, et la date de l'évènement rapportée dans le paragraphe.

\noindent
En haut du formulaire se trouve le bouton permettant de choisir la série temporelle voulue, ce qui affiche la série temporelle correspondante.
\vspace{1\baselineskip}

Pour chaque cas, il est possible de choisir entre deux modes de représentation des dates : jour et heure exacte ou regroupées par jour.

\noindent
En haut du formulaire se trouve le bouton permettant de choisir le mode de représentation voulu, ce qui affiche la série temporelle correspondante.
\vspace{1\baselineskip}

Dans chacun des 4 cas, le graphe correspondant s'affiche, représentant le nombre de paragraphes par rapport à la date.
\vspace{1\baselineskip}

Par défaut, lorsque le formulaire s'affiche la première fois, c'est la série temporelle des dates de l'évènement rapportées dans les paragraphes (jour et heure exacte) qui s'affiche.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Séries temporelles}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/23a.png}
        \caption{Date de l'évènement, jour et heure exacte}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/23b.png}
        \caption{Date de publication, jour et heure exacte}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/23c.png}
        \caption{Date de l'évènement, regroupé par jour}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/23d.png}
        \caption{Date de publication, regroupé par jour}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:23a}
\end{figure}
\FloatBarrier

Le graphe est créé avec Plotly, il est possible d'accéder à la page de Plotly en cliquant sur le logo en haut à droite.

\noindent
D'autres fonctionnalités pour le graphe sont également disponibles : télécharger le graphe, zoomer, déplacer le graphe et le recentrer. 
Toutes ces options sont accessibles à l'aide des icônes en haut à droite.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Résultat du téléchargement du graphe (date de l'évènement, regroupé par jour)}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.8\textwidth]{captures/23f.png}}
    \label{fig:23b}
\end{figure}
\FloatBarrier


\subsection{Télécharger les données} \label{sec:Télécharger les données 2}

Il est possible de télécharger les données de l'évènement et les paragraphes liés, c'est à dire toutes leurs propriétés, en format csv.

\noindent
Pour cela, il est possible d'accéder au formulaire de téléchargement en cliquant sur le bouton "Download data".
\vspace{1\baselineskip}

\begin{itemize}[label=\textbullet]
\item Liste des propriétés des évènements : "Event id", "Hazard type", "Event time", "Start time", "End time", "Median death", "Median injured", "Median affected", "Number of paragraphs", "Number of articles", "Country", "Number of languages", "Number of source countries", "Number of domains", "Duration (days)", "Hazard score", "Latitude", "Longitude", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude"
\item Liste des propriétés des paragraphes : "Event id", "Paragraph id", "Title", "Hazard type", "Publication time", "Paragraph time", "Number of death", "Number of injured", "Number of affected", "Article language", "Article source country", "Domain url", "Latitude", "Longitude", "Standard deviation", "Minimum latitude", "Maximum latitude", "Minimum longitude", "Maximum longitude", "Country", "Places names"
\end{itemize}
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Formulaire de téléchargement}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.7\textwidth]{captures/24a.png}}
    \label{fig:241}
\end{figure}
\FloatBarrier

Il est possible de télécharger uniquement l'évènement, les paragraphes liés ou les deux en même temps.
\vspace{1\baselineskip}

\begin{figure}[h]
    \caption{Message d'erreur si aucun mode de téléchargement n'est choisi}
    \centering
    \makebox[\textwidth]{\includegraphics[width=0.5\textwidth]{captures/24b.png}}
    \label{fig:242}
\end{figure}
\FloatBarrier

Une fois le téléchargement commencé, son avancement apparaît en bas de la fenêtre, au moyen de deux barres de progression.

\noindent
L'avancement de la récupération des données est indiqué par la première phrase : "Fetch data in progress..." ou "Fetch data completed!".

\noindent
L'avancement dans la création du texte à télécharger est affiché à l'aide de la deuxième phrase : "Prepare download :x\%" avec x le pourcentage d'avancement.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Barres de progression}
    \centering
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/24c.png}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{0.49\linewidth}
        \includegraphics[width=\linewidth]{captures/24d.png}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:243}
\end{figure}
\FloatBarrier


\subsection{Télécharger une capture d'écran de la carte} \label{sec:Télécharger une capture d'écran de la carte 2}

À tout moment, il est possible de faire et télécharger une capture d'écran de la carte telle qu'elle est visible actuellement en cliquant sur le bouton "Screenshot".

\noindent
La carte est téléchargée en format png, et est la même que celle actuellement visible : même position et mêmes couches (voir partie \ref{sec:Affichage de la carte 2} Couches).

\noindent
Les fenêtres, les bulles et les boutons n'apparaissent pas.

\noindent
Une flèche vers le nord et une échelle sont ajoutées.
\vspace{1\baselineskip}

\begin{figure}[H]
    \caption{Exemple de capture d'écran}
    \centering
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/25a.png}
        \caption{Carte HazViewer}
        \label{fig:enter-label}
    \end{subfigure}
    \begin{subfigure}{1\linewidth}
        \includegraphics[width=\linewidth]{captures/25b.png}
        \caption{Capture d'écran obtenue}
        \label{fig:enter-label}
    \end{subfigure}
    \label{fig:25}
\end{figure}
\FloatBarrier

\end{document}