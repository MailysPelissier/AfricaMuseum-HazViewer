<?php phpinfo(); ?> pratique pour avoir des infos sur les versions

Dans C:\MAMP\bin\php, mettre un _ devant le nom des fichiers php8.X.X -> _php8.X.X 
pour garder seulement php7.4.16 et un php.8.X.X dans les derniers pour forcer MAMP 
à trouver la version 7.4.16
(capture + mail Vincent + https://web.iamvdo.me/php/principe/#postgresql)

Aller dans MAMP, Préférences, PHP, choisir la version 7.4.16

Modifier C:\MAMP\conf\php7.4.16\php.ini : décommenter (c'est à dire enlever le point-virgule)
la ligne extension=php_pgsql.dll

Modifier C:\MAMP\conf\apache\httpd.conf : rajouter la ligne LoadFile "C:/MAMP/bin/php/php7.4.16/libpq.dll"

Dans MAMP, redémarrer le serveur Apache

Si erreur d'authentification SCRAM (version de libpq trop ancienne) :
Changement d'authentifiaction, on passe par md5:

Modifier C:\Program Files\PostgreSQL\17\data\postgresql.conf :
changer la ligne password_encryption en password_encryption = md5 et la décommenter

Modifier C:\Program Files\PostgreSQL\17\data\pg_hba.conf :
Dans les dernières lignes (# TYPE  DATABASE        USER            ADDRESS                 METHOD),
remplacer scram-sha-256 par md5 (colonne METHOD) (capture)

Aller dans Services (barre de recherche Windows), chercher postgresql, restart the service

Changer le mdp Postgres pour avoir unmdp chiffré md5 : 
Aller dans la console psql (barre de recherche Windows), aller dans la bdd correspondante en s'identifiant
(les mots de passe ne s'affichent pas)
commandes pour changer le mdp puis quitter: 
postgres=# \password postgres
Enter new password: <new-password>
postgres=# \q
(capture)

Aller dans Services (barre de recherche Windows), chercher postgresql, restart the service